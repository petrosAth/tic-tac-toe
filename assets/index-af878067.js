(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&a(t)}).observe(document,{childList:!0,subtree:!0});function f(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerpolicy&&(e.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?e.credentials="include":r.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(r){if(r.ep)return;r.ep=!0;const e=f(r);fetch(r.href,e)}})();const b=(()=>{const n={P0:0,P1:0};function d(r,e){Object.keys(n).forEach((t,s)=>{r?n[t]=0:n[t]+=e[s]})}function f(){for(let r=0;r<Object.keys(n).length;r++)document.querySelector(`#scoreP${r}`).textContent=n[`P${r}`]}return{get:n,set:r=>{const e={x:[!1,[1,0]],o:[!1,[0,1]],d:[!1,[0,0]],r:[!0]};Object.keys(e).includes(r)&&(d(...e[r]),f())}}})(),y=(()=>{const n=[["","",""],["","",""],["","",""]];function d(e,t){const s={x:"sign--cross",o:"sign--circle",X:"sign--cross--win",O:"sign--circle--win"},u=document.querySelector(`#gb${e[0]}${e[1]}`);t===void 0?Object.keys(s).forEach(c=>{u.classList.remove(s[c])}):u.classList.add(s[t])}function f(){for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++)n[e][t]="",d([e,t])}function a(e,t,s){arguments.length===0?f():e?S(n,t):["x","o","X","O"].includes(t)&&(n[s[0]][s[1]]=t,d(s,t))}function r(e,t){let s=!0;for(let l=0;l<3;l++)for(let o=0;o<3;o++)n[l][o]===""&&(s=!1);let u=s?"d":void 0;return[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]].forEach(l=>{let o="";for(let i=0;i<3;i++)o+=n[l[i][0]][l[i][1]].toLowerCase();if(o===e.repeat(3).toLowerCase()&&(u=e,t))for(let i=0;i<3;i++)a(!1,e.toUpperCase(),[l[i][0],l[i][1]])}),u}return{get:n,set:a,getWinner:r}})(),g=(n,d,f,a,r)=>({id:n,species:d,name:f,score:a,sign:r}),S=(n,d)=>{const f={human:d==="o"?"x":"o",ai:d==="o"?"o":"x"},a=(t,s,u)=>{const c=o=>y.getWinner(o,!1);if(c(f.human)===f.human)return-1;if(c(f.ai)===f.ai)return 1;if(c(f.human)==="d")return 0;const l=o=>{let i=o?1/0:-1/0;for(let p=0;p<3;p++)for(let m=0;m<3;m++)if(t[p][m]===""){t[p][m]=o?"x":"o";let h=a(t,s+1,!1);t[p][m]="",i=o?Math.min(h,i):Math.max(h,i)}return i};return l(!!u)};let r=-1/0,e;for(let t=0;t<3;t++)for(let s=0;s<3;s++)if(n[t][s]===""){n[t][s]=f.ai;let u=a(n,0,!0);n[t][s]="",u>r&&(r=u,e=[t,s])}y.set(!1,f.ai,[e[0],e[1]])};(()=>{const n={0:g("P0","human","",0,"x"),1:g("P1","","",0,"o")};document.querySelector(".button__reset").addEventListener("click",()=>{location.reload()});const f=(()=>{const e={};return{subscribe:(c,l)=>{e[c]=e[c]||[],e[c].push(l)},unsubscribe:(c,l)=>{if(e[c]){for(var o=0;o<e[c].length;o++)if(e[c][o]===l){e[c].splice(o,1);break}}},publish:(c,l)=>{e[c]&&e[c].forEach(function(o){o(l)})}}})(),a=(()=>{const e=document.querySelector(".panel"),t=document.querySelector("#template").content,s=t.querySelector(".pick"),u=t.querySelector(".fill"),c=t.querySelector(".score"),l=()=>s,o=m=>(m==="computer"&&u.querySelector(".input__container__P1").remove(),u),i=()=>{for(let m=0;m<Object.keys(n).length;m++)c.querySelector(`#nameP${m}`).textContent=n[m].name;return c};return(m,h=void 0)=>{const _={pick:l,fill:o,score:i};e.replaceChildren(_[m](h))}})();(()=>{(()=>{a("pick");const t=document.querySelector(".option__single"),s=document.querySelector(".option__multi"),u=(c,l)=>{c.addEventListener("click",()=>{n[1].species=l,f.publish("fill")})};u(t,"computer"),u(s,"human")})();const e=()=>{a("fill",n[1].species);const t=document.querySelector(".fill__name-form");document.querySelector(".button__name-form").addEventListener("click",u=>{u.preventDefault(),t.checkValidity()?(n[0].name=document.querySelector("#input__P0").value,n[1].name=n[1].species==="human"?document.querySelector("#input__P1").value:"A.I.",f.publish("score")):t.reportValidity()})};f.subscribe("fill",e)})();const r=()=>{let e=0;a("score"),b.set("r");const t=()=>{y.set(),e=0};(()=>{const s=document.querySelectorAll("[id^='gb']");let u=!1;function c(o,i){if(o<4)return!1;let p=y.getWinner(i,!0);return o>8&&p==="d"?!0:["x","o"].includes(p)}function l(o,i){c(o,i)&&(b.set(y.getWinner(i,!0)),n[0].score=b.get.P0,n[1].score=b.get.P1,u=!0)}s.forEach(o=>{o.addEventListener("click",()=>{if(u)u=!1,t();else if(y.get[o.id[2]][o.id[3]]===""){let i=n[e%2].sign;n[1].species==="computer"?(y.set(!1,n[0].sign,[o.id[2],o.id[3]]),e++,l(e,i),e<9&&!c(e,i)&&(y.set(!0,n[1].sign),e++,l(e,n[1].sign))):(y.set(!1,i,[o.id[2],o.id[3]]),e++,l(e,i))}})})})()};f.subscribe("score",r)})();
