(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const t of e.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&a(t)}).observe(document,{childList:!0,subtree:!0});function f(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerpolicy&&(e.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?e.credentials="include":o.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(o){if(o.ep)return;o.ep=!0;const e=f(o);fetch(o.href,e)}})();const b=(()=>{const n={P0:0,P1:0};function d(o,e){Object.keys(n).forEach((t,s)=>{o?n[t]=0:n[t]+=e[s]})}function f(){for(let o=0;o<Object.keys(n).length;o++)document.querySelector(`#scoreP${o}`).textContent=n[`P${o}`]}return{get:n,set:o=>{const e={x:[!1,[1,0]],o:[!1,[0,1]],d:[!1,[0,0]],r:[!0]};Object.keys(e).includes(o)&&(d(...e[o]),f())}}})(),y=(()=>{const n=[["","",""],["","",""],["","",""]];function d(e,t){const s={x:"sign--cross",o:"sign--circle",X:"sign--cross--win",O:"sign--circle--win"},l=document.querySelector(`#gb${e[0]}${e[1]}`);t===void 0?Object.keys(s).forEach(c=>{l.classList.remove(s[c])}):l.classList.add(s[t])}function f(){for(let e=0;e<n.length;e++)for(let t=0;t<n[e].length;t++)n[e][t]="",d([e,t])}function a(e,t,s){arguments.length===0?f():e?S(n,t):["x","o","X","O"].includes(t)&&(n[s[0]][s[1]]=t,d(s,t))}function o(e,t){let s=!0;for(let u=0;u<3;u++)for(let r=0;r<3;r++)n[u][r]===""&&(s=!1);let l=s?"d":void 0;return[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]].forEach(u=>{let r="";for(let i=0;i<3;i++)r+=n[u[i][0]][u[i][1]].toLowerCase();if(r===e.repeat(3).toLowerCase()&&(l=e,t))for(let i=0;i<3;i++)a(!1,e.toUpperCase(),[u[i][0],u[i][1]])}),l}return{get:n,set:a,getWinner:o}})(),g=(n,d,f,a,o)=>({id:n,species:d,name:f,score:a,sign:o}),S=(n,d)=>{const f={human:d==="o"?"x":"o",ai:d==="o"?"o":"x"},a=(t,s,l)=>{const c=r=>y.getWinner(r,!1);return c(f.human)===f.human?-1:c(f.ai)===f.ai?1:c(f.human)==="d"?0:(r=>{let i=r?1/0:-1/0;for(let m=0;m<3;m++)for(let p=0;p<3;p++)if(t[m][p]===""){t[m][p]=r?"x":"o";let h=a(t,s+1,!r);t[m][p]="",i=r?Math.min(h,i):Math.max(h,i)}return i})(l)};let o=-1/0,e;for(let t=0;t<3;t++)for(let s=0;s<3;s++)if(n[t][s]===""){n[t][s]=f.ai;let l=a(n,0,!0);n[t][s]="",l>o&&(o=l,e=[t,s])}y.set(!1,f.ai,[e[0],e[1]])};(()=>{const n={0:g("P0","human","",0,"x"),1:g("P1","","",0,"o")};document.querySelector(".button__reset").addEventListener("click",()=>{location.reload()});const f=(()=>{const e={};return{subscribe:(c,u)=>{e[c]=e[c]||[],e[c].push(u)},unsubscribe:(c,u)=>{if(e[c]){for(var r=0;r<e[c].length;r++)if(e[c][r]===u){e[c].splice(r,1);break}}},publish:(c,u)=>{e[c]&&e[c].forEach(function(r){r(u)})}}})(),a=(()=>{const e=document.querySelector(".panel"),t=document.querySelector("#template").content,s=t.querySelector(".pick"),l=t.querySelector(".fill"),c=t.querySelector(".score"),u=()=>s,r=p=>(p==="computer"&&l.querySelector(".input__container__P1").remove(),l),i=()=>{for(let p=0;p<Object.keys(n).length;p++)c.querySelector(`#nameP${p}`).textContent=n[p].name;return c};return(p,h=void 0)=>{const _={pick:u,fill:r,score:i};e.replaceChildren(_[p](h))}})();(()=>{(()=>{a("pick");const t=document.querySelector(".option__single"),s=document.querySelector(".option__multi"),l=(c,u)=>{c.addEventListener("click",()=>{n[1].species=u,f.publish("fill")})};l(t,"computer"),l(s,"human")})();const e=()=>{a("fill",n[1].species);const t=document.querySelector(".fill__name-form");document.querySelector(".button__name-form").addEventListener("click",l=>{l.preventDefault(),t.checkValidity()?(n[0].name=document.querySelector("#input__P0").value,n[1].name=n[1].species==="human"?document.querySelector("#input__P1").value:"A.I.",f.publish("score")):t.reportValidity()})};f.subscribe("fill",e)})();const o=()=>{let e=0;a("score"),b.set("r");const t=()=>{y.set(),e=0};(()=>{const s=document.querySelectorAll("[id^='gb']");let l=!1;function c(r,i){if(r<4)return!1;let m=y.getWinner(i,!0);return r>8&&m==="d"?!0:["x","o"].includes(m)}function u(r,i){c(r,i)&&(b.set(y.getWinner(i,!0)),n[0].score=b.get.P0,n[1].score=b.get.P1,l=!0)}s.forEach(r=>{r.addEventListener("click",()=>{if(l)l=!1,t();else if(y.get[r.id[2]][r.id[3]]===""){let i=n[e%2].sign;n[1].species==="computer"?(y.set(!1,n[0].sign,[r.id[2],r.id[3]]),e++,u(e,i),e<9&&!c(e,i)&&(y.set(!0,n[1].sign),e++,u(e,n[1].sign))):(y.set(!1,i,[r.id[2],r.id[3]]),e++,u(e,i))}})})})()};f.subscribe("score",o)})();
